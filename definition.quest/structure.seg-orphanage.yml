#
# quest structure subsegment: orphanage
# 
# (version: 289, saved: 2020-05-23 18:23:04)
#
---
structure:
  segments:
    orphanage:
      blocks:
        in:
          ".editor": [ 100.0, 250.0 ]
          next:
            - objective.Go_orphanage: Activate
            - changelayers.show_orphlayer
        
        scene.orphanage_scene:
          ".editor":
            pos: [ 951.9888305664, 282.9774169922 ]
            in: [ Input ]
            out: [ fistfight, normal ]
          scene: 11.orphanage.yml
          placement: bob/orphscenepoint
          interruptable: true
          _fadein: false
          next.fistfight:
            - script.player_fistfight
            - script.tune_fat
            - script.tune_band2
            - script.tune_band3
            - script.Lock_Door
          next.normal:
            - spawn.new_community_spawn_1
        
        waituntil.new_wait_until_entered_area:
          entered: [ bob/ordphdoor_area, PLAYER ]
          ".editor":
            pos: [ 728.5923461914, 263.8149414062 ]
            in: [ In ]
            out: [ Out ]
          next:
            - objective.go_door: Success
            - scene.orphanage_scene: Input
        
        waituntil.orph_area:
          entered: [ bob/orphanage_area, PLAYER ]
          ".editor":
            pos: [ 455.2590637207, 243.8149108887 ]
            in: [ In ]
            out: [ Out ]
          next:
            - objective.Go_orphanage: Success
            - objective.go_door: Activate
            - waituntil.new_wait_until_entered_area
            - spawn.new_community_spawn
        
        waituntil.player_loose:
          factdb: [ NTR_fisfightDead, ">=", 1 ]
          ".editor":
            pos: [ 1375.9322509766, 385.1904907227 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.neutral_3
            - script.stop_player_fistfight
            - script.new_logmsg
            - script.neutral_2
            - script.neutral_fat
            - script.Unlock_door
        
        waituntil.player_win:
          factdb: [ NTR_fisfightDefeat, ">=", 3 ]
          ".editor":
            pos: [ 1372.1791992188, 284.2033081055 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.new_logmsg_1
            - script.stop_player_fistfight
            - script.neutral_fat
            - script.neutral_2
            - script.neutral_3
            - script.Unlock_door
        
        waituntil.wait_1s:
          elapsed: "00:00:01"
          ".editor":
            pos: [ 1776.4451904297, 143.8611297607 ]
            in: [ In ]
            out: [ Out ]
          next:
            - spawn.new_community_spawn_1
        
        script.Lock_Door:
          ".editor":
            pos: [ 1179.5186767578, 302.3878173828 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_DoorChangeState
          parameter:
            - tag: cname_q704_oriana_feeding_room
            - newState: EDQS_Lock
          next: ".done"
        
        script.Unlock_door:
          ".editor":
            pos: [ 1597.9862060547, 619.45703125 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_DoorChangeState
          parameter:
            - tag: cname_q704_oriana_feeding_room
            - newState: EDQS_RemoveLock
          next: ".done"
        
        script.fat_bandit:
          ".editor":
            pos: [ 1381.0773925781, 468.6393127441 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_FistfightNPC
          parameter:
            - tag: cname_ntr_fat_bandit
            - activate: true
          next: ".done"
        
        script.ff_start_2:
          ".editor":
            pos: [ 1387.7142333984, 582.5161743164 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_FistfightNPC
          parameter:
            - tag: cname_ntr_bandit_2
            - activate: true
          next: ".done"
        
        script.ff_start_3:
          ".editor":
            pos: [ 1399.7642822266, 688.1339111328 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_FistfightNPC
          parameter:
            - tag: cname_ntr_bandit_3
            - activate: true
          next: ".done"
        
        script.neutral_2:
          ".editor":
            pos: [ 1595.3072509766, 422.6904907227 ]
            in: [ In ]
            out: [ Out ]
          function: NTRTuneNPC
          parameter:
            - tag: cname_ntr_bandit_2
            - level: 980
            - attitude: Neutral
          next:
            - script.stop_ff_2
        
        script.neutral_3:
          ".editor":
            pos: [ 1597.8072509766, 520.1904296875 ]
            in: [ In ]
            out: [ Out ]
          function: NTRTuneNPC
          parameter:
            - tag: cname_ntr_bandit_3
            - level: 975
            - attitude: Neutral
          next:
            - script.stop_ff_3
        
        script.neutral_fat:
          ".editor":
            pos: [ 1583.4322509766, 335.8154907227 ]
            in: [ In ]
            out: [ Out ]
          function: NTRTuneNPC
          parameter:
            - tag: cname_ntr_fat_bandit
            - level: 985
            - attitude: Neutral
          next:
            - script.stop_ff_fat
        
        script.new_logmsg:
          ".editor":
            pos: [ 1568.2238769531, 153.7321929932 ]
            in: [ In ]
            out: [ Out ]
          function: radLog
          parameter:
            - logChannel: cname_NTR
            - msg: "YOU LOOSE :D"
          next: ".done"
        
        script.new_logmsg_1:
          ".editor":
            pos: [ 1566.3657226562, 43.9256973267 ]
            in: [ In ]
            out: [ Out ]
          function: radLog
          parameter:
            - logChannel: cname_NTR
            - msg: "YOU WIN :)"
          next: ".done"
        
        script.player_fistfight:
          ".editor":
            pos: [ 1187.1884765625, 383.6393127441 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_FistfightPlayer
          parameter:
            - activate: true
            - toDeath: false
            - endsWithBS: false
            - healthMultiplier: 20.0
          next:
            - waituntil.player_loose
            - waituntil.player_win
        
        script.stop_ff_2:
          ".editor":
            pos: [ 1806.9215087891, 424.6944274902 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_FistfightNPC
          parameter:
            - tag: cname_ntr_bandit_2
            - activate: false
          next: ".done"
        
        script.stop_ff_3:
          ".editor":
            pos: [ 1806.9215087891, 523.8610839844 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_FistfightNPC
          parameter:
            - tag: cname_ntr_bandit_3
            - activate: false
          next: ".done"
        
        script.stop_ff_fat:
          ".editor":
            pos: [ 1800.2547607422, 333.0277709961 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_FistfightNPC
          parameter:
            - tag: cname_ntr_fat_bandit
            - activate: false
          next: ".done"
        
        script.stop_player_fistfight:
          ".editor":
            pos: [ 1585.3072509766, 250.8154907227 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_FistfightPlayer
          parameter:
            - activate: false
          next:
            - waituntil.wait_1s
        
        script.tune_band2:
          ".editor":
            pos: [ 1204.4562988281, 589.6369018555 ]
            in: [ In ]
            out: [ Out ]
          function: NTRTuneNPC
          parameter:
            - tag: cname_ntr_bandit_2
            - level: 980
            - attitude: Hostile
          next:
            - script.ff_start_2
        
        script.tune_band3:
          ".editor":
            pos: [ 1207.2341308594, 680.1923828125 ]
            in: [ In ]
            out: [ Out ]
          function: NTRTuneNPC
          parameter:
            - tag: cname_ntr_bandit_3
            - level: 975
            - attitude: Hostile
          next:
            - script.ff_start_3
        
        script.tune_fat:
          ".editor":
            pos: [ 1188.2995605469, 473.0837097168 ]
            in: [ In ]
            out: [ Out ]
          function: NTRTuneNPC
          parameter:
            - tag: cname_ntr_fat_bandit
            - level: 985
            - attitude: Hostile
          next:
            - script.fat_bandit
        
        changelayers.show_orphlayer:
          ".editor":
            pos: [ 260.204498291, 229.1817932129 ]
            hint: show-only
            in: []
            out: []
          sync: true
          purge: false
          world: bob
          show:
            - orphanage_layer
          next:
            - waituntil.orph_area
        
        spawn.new_community_spawn:
          ".editor":
            pos: [ 596.1948852539, 161.1709899902 ]
            hint: spawn-only
            in: []
            out: []
          phase: orphanage
          spawnsets:
            - comm_orphanage_bandits
          next: ".done"
        
        spawn.new_community_spawn_1:
          ".editor":
            pos: [ 1921.3859863281, 2.4270401001 ]
            hint: spawn-only
            in: []
            out: []
          phase: orphanage_normal
          spawnsets:
            - comm_orphanage_bandits
          next:
            - out
        
        objective.Go_orphanage:
          ".editor": [ 469.111114502, 454.8888549805 ]
          objective: nighttoremember/orphanage_part/go_orphanage
          notify: true
          track: true
          next: ".done"
        
        objective.go_door:
          ".editor": [ 790.258972168, 461.5927124023 ]
          objective: nighttoremember/orphanage_part/go_door
          notify: true
          track: true
          next: ".done"
        
        out:
          ".editor": [ 2102.3889160156, 4.6190471649 ]
          next: ".done"
        
