#
# quest structure subsegment: finale
# 
# (version: 906, saved: 2020-10-18 14:56:29)
#
---
structure:
  segments:
    finale:
      blocks:
        in:
          ".editor": [ 100.0, 250.0 ]
          next:
            - objective.Inv_Inn: Activate
            - waituntil.side_area
            - waituntil.new_wait_until_realtime_elapsed
        
        scene.21_to_bruxa_scene:
          ".editor":
            pos: [ 3544.0, -67.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: 21.orianna_to_bruxa.yml
          placement: bob/orianna
          interruptable: true
          _fadein: false
          next.Output:
            - script.Play_fangs_music
            - spawn.bruxa_spawn
            - despawn.despawn_orihum
            - changelayers.show_dress
        
        scene.23_orianna_bruxa_dies:
          ".editor":
            pos: [ 4721.0, 6.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: 23.orianna_bruxa_dies.yml
          placement: bob/orianna
          interruptable: true
          _fadein: false
          next.Output:
            - scene.24_baron_river_friendly: Input
            - script.Heal_Player
        
        scene.24_baron_river_friendly:
          ".editor":
            pos: [ 4879.0, 72.0 ]
            in: [ Input ]
            out: [ fight, peaceful ]
          scene: 24.baron_river_friendly.yml
          placement: bob/orianna
          interruptable: true
          _fadein: true
          next.fight:
            - script.Kill_orianna
            - spawn.spawn_hostile_baron
            - waituntil.Wait_baron_dead
          next.peaceful:
            - script.Kill_orianna
            - settime.02_30_t
        
        scene.25_baron_dies_long:
          ".editor":
            pos: [ 5508.0, 148.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: 25.baron_dies_long.yml
          placement: bob/orianna
          interruptable: true
          _fadein: false
          next.Output:
            - script.Gameplay_music
            - settime.02_30
            - scene.scene_30_children_corvo_byanko: Input
        
        scene.26_baron_river_aggressive:
          ".editor":
            pos: [ 4410.0, -546.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: 26.baron_river_aggressive.yml
          placement: bob/orianna
          interruptable: true
          _fadein: true
          next.Output:
            - spawn.fight_all_river
            - waituntil.wait_baron_death
            - objective.Kill_bandits: Activate
            - waituntil.bandits_dead
        
        scene.28_orianna_farewell:
          ".editor":
            pos: [ 5998.0, -531.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: 28.orianna_farewell.yml
          placement: bob/orianna
          interruptable: true
          _fadein: true
          next.Output:
            - scene.scene_31_ntr_completed: Input
            - settime.02_30
        
        scene.KILL_SCENE:
          ".editor":
            pos: [ 3617.0, 848.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: 22.orianna_kills_geralt.yml
          placement: bob/orianna
          interruptable: true
          _fadein: false
          next.Output:
            - script.Kill_Player
        
        scene.house_found_comment:
          ".editor":
            pos: [ 1115.8630371094, 153.2471466064 ]
            in: [ orianna_house_found ]
            out: [ Output ]
          scene: 03.geralt_oneliners.yml
          placement: bob/camp
          interruptable: true
          _fadein: false
          next.Output:
            - objective.Riverside_tracks: Success
            - waituntil.room_are
            - objective.Check_house: Activate
        
        scene.main_20_orianna_scene:
          ".editor":
            pos: [ 3052.14453125, -66.2440948486 ]
            in: [ Input ]
            out: [ fight, peaceful ]
          scene: 20.orianna_main.yml
          placement: bob/orianna
          interruptable: true
          _fadein: true
          next.fight:
            - objective.wait_outside: Success
            - script.NTR_SaveGame2
            - waituntil.wait_50perc_health
            - waituntil.outside_fight_area
            - addfact.fact_fight_orianna
          next.peaceful:
            - scene.26_baron_river_aggressive: Input
        
        scene.notes_comment:
          ".editor":
            pos: [ 1958.8635253906, 332.2954101562 ]
            in: [ orianna_house_notes ]
            out: [ Output ]
          scene: 03.geralt_oneliners.yml
          placement: bob/camp
          interruptable: true
          _fadein: false
          next: ".done"
        
        scene.outside_comment:
          ".editor":
            pos: [ 1843.9033203125, 8.3915653229 ]
            in: [ orianna_house_outside ]
            out: [ Output ]
          scene: 03.geralt_oneliners.yml
          placement: bob/camp
          interruptable: true
          _fadein: false
          next.Output:
            - objective.Check_house: Success
            - objective.wait_outside: Activate
        
        scene.room_comment:
          ".editor":
            pos: [ 1450.5578613281, 260.9281005859 ]
            in: [ orianna_house_enter ]
            out: [ Output ]
          scene: 03.geralt_oneliners.yml
          placement: bob/camp
          interruptable: true
          _fadein: false
          next.Output:
            - waituntil.Notes_were_read
        
        scene.scene_19_orianna_appear:
          ".editor":
            pos: [ 2570.0, 32.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: 19.orianna_appear.yml
          placement: bob/orianna
          interruptable: true
          _fadein: true
          next.Output:
            - settime.set_0am
            - waituntil.2_s
        
        scene.scene_27_baron_dies_short:
          ".editor":
            pos: [ 5699.0, -510.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: 27.baron_dies_short.yml
          placement: bob/orianna
          interruptable: true
          _fadein: false
          next.Output:
            - script.Gameplay_music
            - scene.28_orianna_farewell: Input
        
        scene.scene_29_baron_leaving:
          ".editor":
            pos: [ 5491.0, 424.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: 29.baron_leaving.yml
          placement: bob/orianna
          interruptable: true
          _fadein: true
          next.Output:
            - despawn.despawn_bandits_river
            - scene.scene_31_ntr_completed: Input
        
        scene.scene_30_children_corvo_byanko:
          ".editor":
            pos: [ 5954.0, 157.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: 30.children_corvo_byanko.yml
          placement: bob/homescenes
          interruptable: true
          _fadein: true
          next.Output:
            - scene.scene_31_ntr_completed: Input
        
        scene.scene_31_ntr_completed:
          ".editor":
            pos: [ 6635.0, -58.0 ]
            in: [ Input ]
            out: [ Output ]
          scene: 31.ntr_completed.yml
          placement: bob/homescenes
          interruptable: true
          _fadein: true
          next.Output:
            - addfact.ntr_quest_completed
        
        waituntil.1s_repeat:
          elapsed: "00:00:01"
          ".editor":
            pos: [ 3521.0, 774.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.fact_check_fight
        
        waituntil.1ss:
          elapsed: "00:00:01"
          ".editor":
            pos: [ 2804.9228515625, -263.2525634766 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.Set_morph_app
        
        waituntil.1sss:
          elapsed: "00:00:01"
          ".editor":
            pos: [ 5516.0, -197.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.Play_baron_music
        
        waituntil.1ssss:
          elapsed: "00:00:01"
          ".editor":
            pos: [ 3822.0, 128.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.Tune_Orianna_bruxa
        
        waituntil.1sssss:
          elapsed: "00:00:01"
          ".editor":
            pos: [ 3830.0, 429.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.Tune_Orianna
        
        waituntil.2_s:
          elapsed: "00:00:02"
          ".editor":
            pos: [ 2874.0, 45.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.Play_NTR_music
        
        waituntil.2s:
          elapsed: "00:00:02"
          ".editor":
            pos: [ 2226.0, 104.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - addfact.ntr_finale_started
            - changelayers.show_doll
            - settime.Set_11pm
        
        waituntil.House_area:
          inside: [ bob/house_area, PLAYER ]
          ".editor":
            pos: [ 933.9943237305, 238.903717041 ]
            in: [ In ]
            out: [ Out ]
          next:
            - scene.house_found_comment: orianna_house_found
            - script.Unlock_front_door
        
        waituntil.Notes_were_read:
          factdb: [ BookReadState_ntr_notices_orianna_notes, ">=", 1 ]
          ".editor":
            pos: [ 1656.0227050781, 329.4869995117 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.new_fact_checker_branch
        
        waituntil.Outside_room:
          outside: [ bob/room_area, PLAYER ]
          ".editor":
            pos: [ 1535.6656494141, 99.9821472168 ]
            in: [ In ]
            out: [ Out ]
          next:
            - scene.outside_comment: orianna_house_outside
            - waituntil.Player_outside
        
        waituntil.Player_outside:
          entered: [ bob/outside_orianna_house, PLAYER ]
          ".editor":
            pos: [ 1948.1547851562, 106.847114563 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.fade_out
            - script.NTR_SaveGame
        
        waituntil.Wait_baron_dead:
          factdb: [ ntr_baron_edward_dead, ">=", 1 ]
          ".editor":
            pos: [ 5163.0, 163.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - settime.01_30_tt
            - objective.Kill_baron_edward: Success
        
        waituntil.Wait_bruxa_dead:
          factdb: [ ntr_orianna_bruxa_dead, ">=", 1 ]
          ".editor":
            pos: [ 4300.0, -68.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.Set_morph_app_bruxa
            - objective.KILL_ORIANNA: Success
        
        waituntil.bandits_dead:
          factdb: [ ntr_bandit_dead, ">=", 5 ]
          ".editor":
            pos: [ 4924.0, -658.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.Check_if_baron_alive
        
        waituntil.footprints_found:
          factdb: [ ntr_orianna_side_footprints_found, ">=", 1 ]
          ".editor":
            pos: [ 675.4466552734, 236.4975891113 ]
            in: [ In ]
            out: [ Out ]
          next:
            - objective.Inv_Inn: Success
            - objective.Riverside_tracks: Activate
            - waituntil.House_area
            - script.focus_ALL_footprints
        
        waituntil.inside_fight_area:
          inside: [ bob/fight_area, PLAYER ]
          ".editor":
            pos: [ 3278.0, 922.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.reset_fact
        
        waituntil.new_wait_until_realtime_elapsed:
          elapsed: "00:00:01"
          ".editor":
            pos: [ 4630.0, 800.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - scene.24_baron_river_friendly: Input
        
        waituntil.outside_fight_area:
          outside: [ bob/fight_area, PLAYER ]
          ".editor":
            pos: [ 3427.0, 594.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - addfact.ntr_fight_outside_area
        
        waituntil.room_are:
          inside: [ bob/room_area, PLAYER ]
          ".editor":
            pos: [ 1312.3793945312, 175.4995269775 ]
            in: [ In ]
            out: [ Out ]
          next:
            - waituntil.Outside_room
            - scene.room_comment: orianna_house_enter
        
        waituntil.side_area:
          inside: [ bob/side_area, PLAYER ]
          ".editor":
            pos: [ 312.7751464844, 249.7742614746 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.Fcous_first_footprints
        
        waituntil.wait_1s:
          elapsed: "00:00:01"
          ".editor":
            pos: [ 3445.7526855469, 439.7662963867 ]
            in: [ In ]
            out: [ Out ]
          next:
            - objective.KILL_ORIANNA: Activate
            - spawn.orianna_human
            - script.Orianna_fight_indicator
            - spawn.spawn_hostile
        
        waituntil.wait_50perc_health:
          factdb: [ ntr_orianna_vampire_halfhealth, ">=", 1 ]
          ".editor":
            pos: [ 3251.0, 74.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - settime.00_45
            - despawn.despawn_vampire
            - script.Hide_fight_indicator
        
        waituntil.wait_baron_death:
          factdb: [ ntr_baron_edward_dead, ">=", 1 ]
          ".editor":
            pos: [ 5222.0, -501.0 ]
            in: [ In ]
            out: [ Out ]
          next:
            - objective.Kill_baron_edward: Success
            - script.force_kill_alive_bandits
        
        script.Baron_edward_bossbar:
          ".editor":
            pos: [ 5224.0, -176.0 ]
            in: [ In ]
            out: [ Out ]
          function: ShowBossFightIndicator
          parameter:
            - enable: true
            - bossTag: cname_ntr_baron_edward
          next:
            - script.NTR_SaveGame_2
            - objective.Kill_baron_edward: Activate
        
        script.Bruxa_fight_indicator:
          ".editor":
            pos: [ 4147.0, -11.0 ]
            in: [ In ]
            out: [ Out ]
          function: ShowBossFightIndicator
          parameter:
            - enable: true
            - bossTag: cname_ntr_orianna_bruxa
          next:
            - waituntil.Wait_bruxa_dead
        
        script.Check_if_baron_alive:
          ".editor":
            pos: [ 4637.0, -228.0 ]
            in: [ In ]
            out: [ "False", "True" ]
          function: NTR_FactChecker
          parameter:
            - factName: ntr_baron_edward_dead
            - factCond: "=="
            - val: 1
          next.False:
            - objective.Kill_bandits: Success
          next.True:
            - objective.Kill_bandits: Failure
        
        script.Fcous_first_footprints:
          ".editor":
            pos: [ 496.3221130371, 320.4040527344 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_FocusSetHighlight
          parameter:
            - tag: cname_ntr_orianna_footprints_to_house_first
            - highlightType: FMV_Clue
            - overrideCustomLogic: false
          next:
            - waituntil.footprints_found
        
        script.Gameplay_music:
          ".editor":
            pos: [ 5888.0, -279.0 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_PlayMusic
          parameter:
            - areaName: toussaint
            - eventName: mus_loc_toussaint_general_cs_to_gmpl
            - saveType: SESB_ClearSaved
          next:
            - changelayers.show_baron_sword_loot
            - script.NTR_SaveLock_unlock
            - script.hide_baron_indicator
            - despawn.despawn_bandits_river
            - script.Kill_Baron
        
        script.Heal_Player:
          ".editor":
            pos: [ 4883.0, -75.0 ]
            in: [ In ]
            out: [ Out ]
          function: SetHealthQuest
          parameter:
            - targetTag: cname_PLAYER
            - healthPerc: 0
            - relative: false
            - shouldPlayHitParticle: false
          next: ".done"
        
        script.Hide_bruxa_indicator:
          ".editor":
            pos: [ 4765.0, 172.0 ]
            in: [ In ]
            out: [ Out ]
          function: ShowBossFightIndicator
          parameter:
            - enable: false
            - bossTag: cname_ntr_orianna_bruxa
          next: ".done"
        
        script.Hide_fight_indicator:
          ".editor":
            pos: [ 3485.0, 232.0 ]
            in: [ In ]
            out: [ Out ]
          function: ShowBossFightIndicator
          parameter:
            - enable: false
            - bossTag: cname_ntr_orianna_vampire
          next: ".done"
        
        script.Hud_warning:
          ".editor":
            pos: [ 3970.0, 677.0 ]
            in: [ In ]
            out: [ Out ]
          function: DisplayHudMessage
          parameter:
            - localisedStringKey: cname_ntr_outside_fight_warning
            - localizedStringID: 0
          next: ".done"
        
        script.Kill_Baron:
          ".editor":
            pos: [ 6197.0, -419.0 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_ForceKillNPC
          parameter:
            - tag: cname_ntr_baron_edward
            - playDeath: false
          next: ".done"
        
        script.Kill_Player:
          ".editor":
            pos: [ 3807.0, 849.0 ]
            in: [ In ]
            out: [ Out ]
          function: KillPlayer
          parameter:
            - ignoreImmortalityMode: true
          next: ".done"
        
        script.Kill_orianna:
          ".editor":
            pos: [ 5091.0, 56.0 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_ForceKillNPC
          parameter:
            - tag: cname_ntr_orianna_bruxa
            - playDeath: false
          next: ".done"
        
        script.NTR_SaveGame:
          ".editor":
            pos: [ 2127.0910644531, 206.6595611572 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_SaveGame
          parameter:
            - type: SGT_ForcedCheckPoint
            - slot: -1
          next:
            - script.NTR_SaveLock
        
        script.NTR_SaveGame2:
          ".editor":
            pos: [ 3295.7387695312, 357.4479675293 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_SaveGame
          parameter:
            - type: SGT_ForcedCheckPoint
            - slot: -1
          next:
            - waituntil.wait_1s
        
        script.NTR_SaveGame_2:
          ".editor":
            pos: [ 5382.0, -274.0 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_SaveGame
          parameter:
            - type: SGT_ForcedCheckPoint
            - slot: -1
          next:
            - waituntil.1sss
        
        script.NTR_SaveLock:
          ".editor":
            pos: [ 2310.6860351562, 212.4095611572 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_SaveLock
          parameter:
            - lock: true
          next: ".done"
        
        script.NTR_SaveLock_unlock:
          ".editor":
            pos: [ 6227.0, -229.0 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_SaveLock
          parameter:
            - lock: false
          next: ".done"
        
        script.Orianna_fight_indicator:
          ".editor":
            pos: [ 3620.0, 259.0 ]
            in: [ In ]
            out: [ Out ]
          function: ShowBossFightIndicator
          parameter:
            - enable: true
            - bossTag: cname_ntr_orianna_vampire
          next: ".done"
        
        script.Play_NTR_music:
          ".editor":
            pos: [ 3083.1977539062, 25.3480796814 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_PlayMusic
          parameter:
            - areaName: toussaint
            - eventName: mus_q704_after_feeding
            - saveType: SESB_ClearSaved
          next: ".done"
        
        script.Play_baron_music:
          ".editor":
            pos: [ 5676.0, -296.0 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_PlayMusic
          parameter:
            - areaName: novigrad
            - eventName: mus_q601_combat_with_offir_soldiers
            - saveType: SESB_Save
          next: ".done"
        
        script.Play_fangs_music:
          ".editor":
            pos: [ 3744.0, -152.0 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_PlayMusic
          parameter:
            - areaName: toussaint
            - eventName: mus_q704_vampire_siege
            - saveType: SESB_Save
          next: ".done"
        
        script.Set_morph_app:
          ".editor":
            pos: [ 2954.4443359375, -185.9756622314 ]
            in: [ In ]
            out: [ Out ]
          function: AppearanceChange
          parameter:
            - npcsTag: cname_ntr_orianna_vampire
            - appearanceName: cname_orianna_human_morph
          next: ".done"
        
        script.Set_morph_app_bruxa:
          ".editor":
            pos: [ 4441.0, 6.0 ]
            in: [ In ]
            out: [ Out ]
          function: AppearanceChange
          parameter:
            - npcsTag: cname_ntr_orianna_bruxa
            - appearanceName: cname_orianna_bruxa_morph
          next:
            - settime.01_30
        
        script.Try_to_reset_music:
          ".editor":
            pos: [ 2699.0, -108.0 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_PlayMusic
          parameter:
            - areaName: toussaint
            - eventName: mus_q704_after_feeding
            - saveType: SESB_ClearSaved
          next: ".done"
        
        script.Tune_Orianna:
          ".editor":
            pos: [ 4033.0, 342.0 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_TuneOriannaVampire
          next: ".done"
        
        script.Tune_Orianna_bruxa:
          ".editor":
            pos: [ 3990.1535644531, 78.6964569092 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_TuneOriannaBruxa
          next:
            - script.Bruxa_fight_indicator
        
        script.Tune_bandits:
          ".editor":
            pos: [ 5225.0, -394.0 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_TuneNPC
          parameter:
            - tag: cname_ntr_baron_bandit
            - level: 1000
            - npcGroupType: ENGT_Enemy
          next: ".done"
        
        script.Unlock_front_door:
          ".editor":
            pos: [ 1160.6940917969, 58.4589042664 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_DoorChangeState
          parameter:
            - tag: cname_ntr_orianna_house_front_door
            - newState: EDQS_RemoveLock
          next: ".done"
        
        script.Warning_1st_sec:
          ".editor":
            pos: [ 3779.0, 662.0 ]
            in: [ In ]
            out: [ "False", "True" ]
          function: NTR_FactChecker
          parameter:
            - factName: ntr_fight_outside_area
            - factCond: "=="
            - val: 1
          next.True:
            - script.Hud_warning
        
        script.branch_fact_7:
          ".editor":
            pos: [ 3342.0, 780.0 ]
            in: [ In ]
            out: [ "False", "True" ]
          function: NTR_FactChecker
          parameter:
            - factName: ntr_fight_outside_area
            - factCond: ">="
            - val: 7
          next.False:
            - waituntil.1s_repeat
            - waituntil.inside_fight_area
          next.True:
            - scene.KILL_SCENE: Input
            - despawn.despawn_vampire_bruxa
        
        script.fact_check_fight:
          ".editor":
            pos: [ 3268.0, 666.0 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_FactChecker
          parameter:
            - factName: ntr_fight_orianna
            - factCond: "=="
            - val: 1
          next:
            - waituntil.outside_fight_area
        
        script.fade_out:
          ".editor":
            pos: [ 2086.0, 23.0 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_FadeOutQuest
          parameter:
            - fadeTime: 2.0
            - r: 0
            - g: 0
            - b: 0
          next:
            - waituntil.2s
        
        script.focus_ALL_footprints:
          ".editor":
            pos: [ 892.7736816406, 133.1155700684 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_FocusSetHighlight
          parameter:
            - tag: cname_ntr_orianna_footprints_to_house
            - highlightType: FMV_Clue
            - overrideCustomLogic: false
          next: ".done"
        
        script.force_kill_alive_bandits:
          ".editor":
            pos: [ 5400.0, -575.0 ]
            in: [ In ]
            out: [ Out ]
          function: NTR_ForceKillNPC
          parameter:
            - tag: cname_ntr_baron_bandit
            - playDeath: true
          next:
            - settime.01_30_t
        
        script.hide_baron_indicator:
          ".editor":
            pos: [ 6244.0, -106.0 ]
            in: [ In ]
            out: [ Out ]
          function: ShowBossFightIndicator
          parameter:
            - enable: false
            - bossTag: cname_ntr_baron_edward
          next: ".done"
        
        script.new_fact_checker_branch:
          ".editor":
            pos: [ 1795.6088867188, 408.0973510742 ]
            in: [ In ]
            out: [ "False", "True" ]
          function: NTR_FactChecker
          parameter:
            - factName: ntr_finale_started
            - factCond: "=="
            - val: 1
          next.False:
            - scene.notes_comment: orianna_house_notes
        
        script.reset_fact:
          ".editor":
            pos: [ 3466.0, 923.0 ]
            in: [ In ]
            out: [ Out ]
          function: ResetFactQuest
          parameter:
            - factID: cname_ntr_fight_outside_area
          next: ".done"
        
        changelayers.show_baron_sword_loot:
          ".editor":
            pos: [ 6223.0, -333.0 ]
            hint: show-only
            in: []
            out: []
          sync: true
          purge: false
          world: bob
          show:
            - river_sword_loot
          next: ".done"
        
        changelayers.show_doll:
          ".editor":
            pos: [ 2426.0, -205.0 ]
            hint: show-only
            in: []
            out: []
          sync: true
          purge: false
          world: bob
          show:
            - beach_doll
          next: ".done"
        
        changelayers.show_dress:
          ".editor":
            pos: [ 3746.0, -255.0 ]
            hint: show-only
            in: []
            out: []
          sync: true
          purge: false
          world: bob
          show:
            - beach_orianna_dress
          next: ".done"
        
        spawn.Spawn_orianna_vampire:
          ".editor":
            pos: [ 2652.8291015625, -176.9574737549 ]
            hint: spawn-only
            in: []
            out: []
          phase: before_scene
          spawnsets:
            - comm_orianna_vampire
          next:
            - waituntil.1ss
        
        spawn.bruxa_spawn:
          ".editor":
            pos: [ 3692.0, 44.0 ]
            hint: spawn-only
            in: []
            out: []
          phase: fight_hostile
          spawnsets:
            - comm_orianna_bruxa
          next:
            - waituntil.1ssss
        
        spawn.fight_all_river:
          ".editor":
            pos: [ 5048.0, -318.0 ]
            hint: spawn-only
            in: []
            out: []
          phase: fight_all
          spawnsets:
            - comm_bandits_river
          next:
            - script.Baron_edward_bossbar
            - script.Tune_bandits
        
        spawn.orianna_human:
          ".editor":
            pos: [ 3635.4763183594, 440.0137329102 ]
            hint: spawn-only
            in: []
            out: []
          phase: before_scene_to_bruxa
          spawnsets:
            - comm_orianna_human
          next: ".done"
        
        spawn.river_in_inn:
          ".editor":
            pos: [ 3343.0, -525.0 ]
            hint: spawn-only
            in: []
            out: []
          phase: before_scene
          spawnsets:
            - comm_bandits_river
          next: ".done"
        
        spawn.spawn_hostile:
          ".editor":
            pos: [ 3622.7778320312, 345.687713623 ]
            hint: spawn-only
            in: []
            out: []
          phase: fight_hostile
          spawnsets:
            - comm_orianna_vampire
          next:
            - waituntil.1sssss
        
        spawn.spawn_hostile_baron:
          ".editor":
            pos: [ 5061.0, -51.0 ]
            hint: spawn-only
            in: []
            out: []
          phase: fight_only_baron
          spawnsets:
            - comm_bandits_river
          next:
            - script.Baron_edward_bossbar
        
        spawn.spawn_human:
          ".editor":
            pos: [ 2639.0, -288.0 ]
            hint: spawn-only
            in: []
            out: []
          phase: before_scene_peaceful
          spawnsets:
            - comm_orianna_human
          next: ".done"
        
        despawn.Despawn_all_bandits:
          ".editor":
            pos: [ 3150.0, -412.0 ]
            hint: despawn-only
            in: []
            out: []
          spawnsets:
            - comm_camp_bandit_axe_day
            - comm_camp_bandit_axe_night
            - comm_camp_bandits
            - comm_camp_baron
            - comm_orphanage_bandits
          next:
            - spawn.river_in_inn
        
        despawn.despawn_bandits_river:
          ".editor":
            pos: [ 6241.0, -7.0 ]
            hint: despawn-only
            in: []
            out: []
          spawnsets:
            - comm_bandits_river
          next: ".done"
        
        despawn.despawn_orihum:
          ".editor":
            pos: [ 3686.0, 157.0 ]
            hint: despawn-only
            in: []
            out: []
          spawnsets:
            - comm_orianna_human
          next: ".done"
        
        despawn.despawn_vampire:
          ".editor":
            pos: [ 3489.275390625, 151.2270507812 ]
            hint: despawn-only
            in: []
            out: []
          spawnsets:
            - comm_orianna_vampire
          next: ".done"
        
        despawn.despawn_vampire_bruxa:
          ".editor":
            pos: [ 3617.0, 929.0 ]
            hint: despawn-only
            in: []
            out: []
          spawnsets:
            - comm_orianna_bruxa
            - comm_orianna_vampire
          next: ".done"
        
        objective.Check_house:
          ".editor": [ 1292.9097900391, 462.9410705566 ]
          objective: nighttoremember/river_part/check_house
          notify: true
          track: true
          next: ".done"
        
        objective.Inv_Inn:
          ".editor": [ 376.7718811035, 452.561340332 ]
          objective: nighttoremember/river_part/find_house
          notify: true
          track: true
          next: ".done"
        
        objective.KILL_ORIANNA:
          ".editor": [ 4234.0, 613.0 ]
          objective: nighttoremember/river_part/kill_orianna
          notify: false
          track: true
          next: ".done"
        
        objective.Kill_bandits:
          ".editor": [ 4828.0, -245.0 ]
          objective: nighttoremember/river_part/kill_bandits
          notify: false
          track: false
          next: ".done"
        
        objective.Kill_baron_edward:
          ".editor": [ 5491.0, -48.0 ]
          objective: nighttoremember/river_part/kill_baron
          notify: false
          track: true
          next: ".done"
        
        objective.Riverside_tracks:
          ".editor": [ 956.9162597656, 444.2760620117 ]
          objective: nighttoremember/river_part/follow_tracks
          notify: true
          track: false
          next: ".done"
        
        objective.wait_outside:
          ".editor": [ 2387.0, 396.0 ]
          objective: nighttoremember/river_part/wait_outside
          notify: true
          track: false
          next: ".done"
        
        questoutcome.NTR_outcome:
          ".editor": [ 7030.0, -60.0 ]
          quest: nighttoremember
          notify: true
          next:
            - out
        
        settime.00_45:
          ".editor": [ 3399.0, 5.0 ]
          time: "00:45"
          next:
            - scene.21_to_bruxa_scene: Input
        
        settime.01_30:
          ".editor": [ 4577.0, 96.0 ]
          time: "01:30"
          next:
            - scene.23_orianna_bruxa_dies: Input
            - script.Hide_bruxa_indicator
        
        settime.01_30_t:
          ".editor": [ 5544.0, -447.0 ]
          time: "01:30"
          next:
            - scene.scene_27_baron_dies_short: Input
        
        settime.01_30_tt:
          ".editor": [ 5350.0, 237.0 ]
          time: "01:30"
          next:
            - scene.25_baron_dies_long: Input
        
        settime.02_30:
          ".editor": [ 6009.0, -43.0 ]
          time: "02:30"
          next: ".done"
        
        settime.02_30_t:
          ".editor": [ 5217.0, 391.0 ]
          time: "02:30"
          next:
            - scene.scene_29_baron_leaving: Input
        
        settime.Set_11pm:
          ".editor": [ 2413.0, -41.0 ]
          time: "22:30"
          next:
            - spawn.Spawn_orianna_vampire
            - scene.scene_19_orianna_appear: Input
            - spawn.spawn_human
        
        settime.set_0am:
          ".editor": [ 2868.0, -71.0 ]
          time: "00:00"
          next:
            - scene.main_20_orianna_scene: Input
            - despawn.Despawn_all_bandits
        
        addfact.fact_fight_orianna:
          ".editor": [ 3264.0, -45.0 ]
          value: [ ntr_fight_orianna, 1 ]
          next: ".done"
        
        addfact.ntr_fight_outside_area:
          ".editor": [ 3585.0, 660.0 ]
          value: [ ntr_fight_outside_area, 1 ]
          next:
            - script.branch_fact_7
            - script.Warning_1st_sec
        
        addfact.ntr_finale_started:
          ".editor": [ 2483.1254882812, 183.9095458984 ]
          value: [ ntr_finale_started, 1 ]
          next: ".done"
        
        addfact.ntr_quest_completed:
          ".editor": [ 6845.0, 27.0 ]
          value: [ ntr_quest_completed, 1 ]
          next:
            - questoutcome.NTR_outcome: Success
        
        out:
          ".editor": [ 7190.0, 30.0 ]
          next: ".done"
        
