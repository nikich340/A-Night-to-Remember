#
# quest structure subsegment: regis_mail
# 
# (version: 218, saved: 2020-05-06 17:51:31)
#
---
structure:
  segments:
    regis_mail:
      blocks:
        in:
          ".editor": [ -50.3333282471, 247.6666717529 ]
          next:
            - script.Undress_geralt
        
        scene.10_scene:
          ".editor":
            pos: [ 463.8095397949, 274.3333435059 ]
            in: [ Input ]
            out: [ Output ]
          scene: 10.regis_owl_arrive.yml
          placement: bob/introscenes
          interruptable: true
          _fadein: false
          next.Output:
            - changelayers.owl_layer
            - objective.Fresh_air: Activate
            - questoutcome.Finish_Night_of_Nightmare: Success
        
        waituntil.mail_looted:
          looted: bob/regis_mail
          ".editor":
            pos: [ 1374.8280029297, 265.9329528809 ]
            in: [ In ]
            out: [ Out ]
          next:
            - objective.Read_letter: Success
            - waituntil.wait_2s
        
        waituntil.not_read:
          factdb: [ regisLetterRead, "=", 0 ]
          ".editor":
            pos: [ 1764.4644775391, 255.609664917 ]
            in: [ In ]
            out: [ Out ]
          next:
            - waituntil.wait_2s
        
        waituntil.read:
          factdb: [ NTRregisLetterRead, ">=", 1 ]
          ".editor":
            pos: [ 1783.7926025391, 364.6978759766 ]
            in: [ In ]
            out: [ Out ]
          next:
            - out
        
        waituntil.wait_2s:
          elapsed: "00:00:02"
          ".editor":
            pos: [ 1619.4644775391, 77.2763290405 ]
            in: [ In ]
            out: [ Out ]
          next:
            - script.Book_read_checker
        
        waituntil.wait_until_outhome:
          inside: [ bob/homeout_area, PLAYER ]
          ".editor":
            pos: [ 1035.4947509766, 275.5995483398 ]
            in: [ In ]
            out: [ Out ]
          next:
            - waituntil.mail_looted
            - objective.Fresh_air: Success
            - objective.Read_letter: Activate
        
        script.Book_read_checker:
          ".editor":
            pos: [ 1565.6571044922, 250.7474975586 ]
            in: [ In ]
            out: [ Out ]
          function: NTRBookReadChecker
          parameter:
            - bookName: cname_ntr_notices_regis_letter
            - factName: NTRregisLetterRead
          next:
            - waituntil.not_read
            - waituntil.read
        
        script.Undress_geralt:
          ".editor":
            pos: [ 191.8094940186, 273.0 ]
            in: [ In ]
            out: [ Out ]
          function: UnequipPlayerItemsQuest
          parameter:
            - all: true
          next:
            - scene.10_scene: Input
        
        changelayers.owl_layer:
          ".editor":
            pos: [ 670.1290283203, 275.0562744141 ]
            hint: show-only
            in: []
            out: []
          sync: true
          purge: false
          world: bob
          show:
            - owl_layer
          next:
            - spawn.spawn_oil
        
        spawn.spawn_oil:
          ".editor":
            pos: [ 859.4147338867, 274.3420410156 ]
            hint: spawn-only
            in: []
            out: []
          phase: normal
          spawnsets:
            - comm_regis_owl
          next:
            - waituntil.wait_until_outhome
        
        objective.Fresh_air:
          ".editor": [ 1017.1463623047, 477.3131408691 ]
          objective: nighttoremember/regis_owl/out_home
          notify: true
          track: false
          next: ".done"
        
        objective.Read_letter:
          ".editor": [ 1417.9783935547, 460.5590209961 ]
          objective: nighttoremember/regis_owl/take_letter
          notify: true
          track: true
          next: ".done"
        
        questoutcome.Finish_Night_of_Nightmare:
          ".editor": [ 762.4936523438, 507.0811767578 ]
          quest: nightofnightmares
          notify: true
          next: ".done"
        
        out:
          ".editor": [ 2139.0334472656, 298.6586914062 ]
          next: ".done"
        
